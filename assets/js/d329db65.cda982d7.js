"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[7241],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return f}});var o=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=o.createContext({}),c=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=c(e.components);return o.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(t),f=a,m=d["".concat(l,".").concat(f)]||d[f]||p[f]||r;return t?o.createElement(m,i(i({ref:n},u),{},{components:t})):o.createElement(m,i({ref:n},u))}));function f(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var c=2;c<r;c++)i[c]=t[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},5701:function(e,n,t){t.r(n),t.d(n,{assets:function(){return u},contentTitle:function(){return l},default:function(){return f},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return p}});var o=t(7462),a=t(3366),r=(t(7294),t(3905)),i=["components"],s={slug:"how-to-install-and-configure-snowsql",title:"How To Install and Configure SnowSQL",hide_table_of_contents:!0},l=void 0,c={permalink:"/how-to-install-and-configure-snowsql",source:"@site/blog/2019-12-06-how-to-install-and-configure-snowsql/index.md",title:"How To Install and Configure SnowSQL",description:"SnowSQL is the command-line interface for accessing your Snowflake instance.",date:"2019-12-06T00:00:00.000Z",formattedDate:"December 6, 2019",tags:[],readingTime:4.38,truncated:!0,authors:[],frontMatter:{slug:"how-to-install-and-configure-snowsql",title:"How To Install and Configure SnowSQL",hide_table_of_contents:!0},prevItem:{title:"268 Billion Events With Snowplow and Snowflake at Cargurus",permalink:"/268-billion-events-with-snowplow-snowflake-at-cargurus"},nextItem:{title:"GDPR for Engineers - What You Need to Know",permalink:"/gdpr-for-engineers-what-you-need-to-know"}},u={authorsImageUrls:[]},p=[{value:"Installation",id:"installation",level:3},{value:"Add your connection details to the <code>connections</code> section of <code>~/.snowsql/config</code>.",id:"add-your-connection-details-to-the-connections-section-of-snowsqlconfig",level:3},{value:"Add your personal preferences to the options section.",id:"add-your-personal-preferences-to-the-options-section",level:3},{value:"Lock the file down to you and only you.",id:"lock-the-file-down-to-you-and-only-you",level:3}],d={toc:p};function f(e){var n=e.components,s=(0,a.Z)(e,i);return(0,r.kt)("wrapper",(0,o.Z)({},d,s,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://docs.snowflake.com/en/user-guide/snowsql.html"},"SnowSQL")," is the command-line interface for accessing your Snowflake instance."),(0,r.kt)("p",null,'The following is a quick "how to" guide for setting it up.'),(0,r.kt)("h3",{id:"installation"},"Installation"),(0,r.kt)("p",null,"After logging into your Snowflake web interface, the SnowSQL installer is available via ",(0,r.kt)("inlineCode",{parentName:"p"},"Help")," -> ",(0,r.kt)("inlineCode",{parentName:"p"},"Download"),":"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"download",src:t(7833).Z,width:"720",height:"426"})),(0,r.kt)("p",null,"You'll need to select the appropriate version for your machine:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"cli",src:t(8550).Z,width:"720",height:"409"})),(0,r.kt)("p",null,"..and install it:"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"install",src:t(1929).Z,width:"720",height:"538"})),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"install-success",src:t(9181).Z,width:"720",height:"518"})),(0,r.kt)("p",null,"To verify installation, simply open a terminal window and run snowsql. If installed properly, you will receive a list of connection and option flags:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ snowsql\n    Usage: snowsql [OPTIONS]\n\n    Options:\n      -a, --accountname TEXT          Name assigned to your Snowflake account. If\n                                      you are not on us-west-2 or AWS deployement,\n                                      append the region and platform to the end,\n                                      e.g., <account>.<region> or\n                                      <account>.<region>.<platform>Honors\n                                      $SNOWSQL_ACCOUNT.\n      -u, --username TEXT             Username to connect to Snowflake. Honors\n                                      $SNOWSQL_USER.\n      -d, --dbname TEXT               Database to use. Honors $SNOWSQL_DATABASE.\n      -s, --schemaname TEXT           Schema in the database to use. Honors\n                                      $SNOWSQL_SCHEMA.\n      -r, --rolename TEXT             Role name to use. Honors $SNOWSQL_ROLE.\n      -w, --warehouse TEXT            Warehouse to use. Honors $SNOWSQL_WAREHOUSE.\n      -h, --host TEXT                 Host address for the connection. Honors\n                                      $SNOWSQL_HOST.\n      -p, --port INTEGER              Port number for the connection. Honors\n                                      $SNOWSQL_PORT.\n      --region TEXT                   (DEPRECATED) Append the region or any sub\n                                      domains before snowflakecomputing.com to the\n                                      end of accountname parameter after a dot.\n                                      e.g., accountname=<account>.<region>\n      -m, --mfa-passcode TEXT         Token to use for multi-factor authentication\n                                      (MFA)\n      --mfa-passcode-in-password      Appends the MFA passcode to the end of the\n                                      password.\n      --abort-detached-query          Aborts a query if the connection between the\n                                      client and server is lost. By default, it\n                                      won't abort even if the connection is lost.\n      --probe-connection              Test connectivity to Snowflake. This option\n                                      is mainly used to print out the TLS/SSL\n                                      certificate chain.\n      --proxy-host TEXT               (DEPRECATED. Use HTTPS_PROXY and HTTP_PROXY\n                                      environment variables.) Proxy server\n                                      hostname. Honors $SNOWSQL_PROXY_HOST.\n      --proxy-port INTEGER            (DEPRECATED. Use HTTPS_PROXY and HTTP_PROXY\n                                      environment variables.) Proxy server port\n                                      number. Honors $SNOWSQL_PROXY_PORT.\n      --proxy-user TEXT               (DEPRECATED. Use HTTPS_PROXY and HTTP_PROXY\n                                      environment variables.) Proxy server\n                                      username. Honors $SNOWSQL_PROXY_USER. Set\n                                      $SNOWSQL_PROXY_PWD for the proxy server\n                                      password.\n      --authenticator TEXT            Authenticator: 'snowflake',\n                                      'externalbrowser' (to use any IdP and a web\n                                      browser), or\n                                      https://<your_okta_account_name>.okta.com\n                                      (to use Okta natively).\n      -v, --version                   Shows the current SnowSQL version, or uses a\n                                      specific version if provided as a value.\n      --noup                          Disables auto-upgrade for this run. If no\n                                      version is specified for -v, the latest\n                                      version in ~/.snowsql/ is used.\n      -D, --variable TEXT             Sets a variable to be referred by &<var>. -D\n                                      tablename=CENUSTRACKONE or --variable\n                                      db_key=$DB_KEY\n      -o, --option TEXT               Set SnowSQL options. See the options\n                                      reference in the Snowflake documentation.\n      -f, --filename PATH             File to execute.\n      -q, --query TEXT                Query to execute.\n      --config PATH                   Path and name of the SnowSQL configuration\n                                      file. By default, ~/.snowsql/config.\n      -P, --prompt                    Forces a password prompt. By default,\n                                      $SNOWSQL_PWD is used to set the password.\n      -M, --mfa-prompt                Forces a prompt for the second token for\n                                      MFA.\n      -c, --connection TEXT           Named set of connection parameters to use.\n      --single-transaction            Connects with autocommit disabled. Wraps\n                                      BEGIN/COMMIT around statements to execute\n                                      them as a single transaction, ensuring all\n                                      commands complete successfully or no change\n                                      is applied.\n      --private-key-path PATH         Path to private key file in PEM format used\n                                      for key pair authentication. Private key\n                                      file is required to be encrypted and\n                                      passphrase is required to be specified in\n                                      environment variable\n                                      $SNOWSQL_PRIVATE_KEY_PASSPHRASE\n      -U, --upgrade                   Force upgrade of SnowSQL to the latest\n                                      version.\n      -K, --client-session-keep-alive\n                                      Keep the session active indefinitely, even\n                                      if there is no activity from the user..\n      --disable-request-pooling       Disable request pooling. This can help speed\n                                      up connection failover\n      -?, --help                      Show this message and exit.\n")),(0,r.kt)("h1",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"As indicated above, SnowSQL has a host of connection params and settings, and allows variable declaration and substitution. You won't need to be familiar with all the options to hit the ground running, but I definitely recommend leveraging ~/.snowsql/config to persist your connection details and personal preferences."),(0,r.kt)("h3",{id:"add-your-connection-details-to-the-connections-section-of-snowsqlconfig"},"Add your connection details to the ",(0,r.kt)("inlineCode",{parentName:"h3"},"connections")," section of ",(0,r.kt)("inlineCode",{parentName:"h3"},"~/.snowsql/config"),"."),(0,r.kt)("p",null,"The first few lines of your ~/.snowsql/config file should look like the following:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"[connections]\naccountname = YOUR_ACCOUNT_NAME\nusername = YOUR_USERNAME\npassword = YOUR_PASSWORD\n")),(0,r.kt)("p",null,"Please note! There are some caveats regarding quote-wrapping special characters and escaping quotes within passwords. For more information, please consult the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.snowflake.com/en/user-guide/snowsql-config.html"},"docs located here"),"."),(0,r.kt)("h3",{id:"add-your-personal-preferences-to-the-options-section"},"Add your personal preferences to the ","[options]"," section."),(0,r.kt)("p",null,"I'm OK with most of the configuration defaults, so the only option I typically modify is sfqid. It enables output of snowflake query id's in the summary, which can be quite helpful:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"    [options]\n    sfqid = True\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Want to be unfriendly? Add:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"friendly = False\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Want to write to a specific log location? Add:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"log_file = your/path/to/log\n")),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Want to be difficult? Add:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"editor = emacs\n")),(0,r.kt)("p",null,"(just kidding)"),(0,r.kt)("p",null,"You get the idea. Your mileage may vary."),(0,r.kt)("h3",{id:"lock-the-file-down-to-you-and-only-you"},"Lock the file down to you and only you."),(0,r.kt)("p",null,"If you've been paying attention, you have already realized sensitive credentials are stored in plaintext on your machine. This is not a reason to ?, and is similar to the postgres pgpass file. You'll want to lock it down."),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"chmod 400 ~/.snowsql/config")),(0,r.kt)("h1",{id:"summary"},"Summary"),(0,r.kt)("p",null,"SnowSQL is pretty easy to set up and start using, and you'll probably find it quickly becomes critical for development and database administration workflows. After installing the tool and becoming familiar with how it is configured and utilized, you'll be well on your way to a pleasant experience."))}f.isMDXComponent=!0},7833:function(e,n,t){n.Z=t.p+"assets/images/01_help_download-51bd2775f280fdd3c8e8de03e82b59fc.png"},8550:function(e,n,t){n.Z=t.p+"assets/images/02_snowcli-cb05330d22257337709910d385964da5.png"},1929:function(e,n,t){n.Z=t.p+"assets/images/03a_install-82937641bba4ac10cc6733e3a545dcce.png"},9181:function(e,n,t){n.Z=t.p+"assets/images/03b_install-2402bae97e26875cf0192c4b0a82925a.png"}}]);